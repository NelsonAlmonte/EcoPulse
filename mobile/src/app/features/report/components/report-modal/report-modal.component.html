<ion-header class="ion-no-border">
  <ion-toolbar>
    <ion-segment
      class="px-4"
      [value]="currentSegment"
      (ionChange)="changeCurrentSegment($event)"
    >
      <ion-segment-button class="opacity-100" value="photo" content-id="photo">
        <lucide-angular [img]="photoIcon" size="18"></lucide-angular>
        <ion-label class="capitalize">Foto</ion-label>
      </ion-segment-button>
      <ion-segment-button
        class="opacity-100"
        value="location"
        content-id="location"
      >
        <lucide-angular [img]="placeIcon" size="18"></lucide-angular>

        <ion-label class="capitalize">Lugar</ion-label>
      </ion-segment-button>
      <ion-segment-button
        class="opacity-100"
        value="categories"
        content-id="categories"
      >
        <lucide-angular [img]="issueIcon" size="18"></lucide-angular>

        <ion-label class="capitalize">Incidencia</ion-label>
      </ion-segment-button>
    </ion-segment>
  </ion-toolbar>
</ion-header>
<ion-content>
  <ion-segment-view>
    <ion-segment-content class="ion-padding" id="photo">
      <div class="flex justify-center my-4">
        <h4 class="text-2xl!">Foto de la incidencia</h4>
      </div>
      <img class="rounded-2xl" src="{{ photo() }}" alt="Issue photo" />
    </ion-segment-content>
    <ion-segment-content class="ion-padding" id="location">
      <div class="flex justify-center my-4">
        <h4 class="text-2xl!">Lugar de la incidencia</h4>
      </div>
      <app-location-preview></app-location-preview>
    </ion-segment-content>
    <ion-segment-content class="ion-padding" id="categories">
      <div class="flex justify-center my-4">
        <h4 class="text-2xl!">Tipo de incidencia</h4>
      </div>
      <app-category-list
        (selectedCategory)="selectedCategory = $event"
      ></app-category-list>
      <div class="flex justify-center my-4">
        <h4 class="text-2xl!">Dejanos tu comentario</h4>
      </div>
      <ion-textarea
        label="Comentario (opcional)"
        labelPlacement="floating"
        [counter]="true"
        maxlength="100"
        shape="round"
        fill="outline"
        rows="5"
        [(ngModel)]="comment"
      ></ion-textarea>
    </ion-segment-content>
  </ion-segment-view>
</ion-content>
<ion-footer class="ion-no-border">
  <ion-toolbar>
    <div class="flex justify-between w-full ion-padding">
      @if (currentSegment === 'photo') {
      <button
        type="button"
        class="md-secondary-container md-on-secondary-container focus:outline-none font-medium rounded-3xl text-sm px-5 py-2.5 text-center inline-flex items-center"
        (click)="cancel()"
      >
        <lucide-angular
          class="me-0.5"
          [img]="cancelIcon"
          size="18"
        ></lucide-angular>
        Cancelar
      </button>
      } @else {
      <button
        type="button"
        class="md-secondary-container md-on-secondary-container focus:outline-none font-medium rounded-3xl text-sm px-5 py-2.5 text-center inline-flex items-center"
        (click)="back()"
      >
        <lucide-angular
          class="me-0.5"
          [img]="prevIcon"
          size="18"
        ></lucide-angular>
        Anterior
      </button>
      } @if (currentSegment === 'categories') {
      <button
        type="button"
        class="md-primary md-on-primary focus:outline-none font-medium rounded-3xl text-sm px-5 py-2.5 text-center inline-flex items-center"
        (click)="sendReport()"
      >
        <lucide-angular
          class="me-0.5"
          [img]="sendIcon"
          size="18"
        ></lucide-angular>
        Enviar
      </button>
      } @else {
      <button
        type="button"
        class="md-primary md-on-primary focus:outline-none font-medium rounded-3xl text-sm px-5 py-2.5 text-center inline-flex items-center"
        (click)="next()"
      >
        Siguiente
        <lucide-angular
          class="ms-0.5"
          [img]="nextIcon"
          size="18"
        ></lucide-angular>
      </button>
      }
    </div>
  </ion-toolbar>
</ion-footer>
